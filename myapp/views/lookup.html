<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>#</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .search {
            border: 1px solid gray;
        }

        .filter {
            border: 1px solid gray;
            background: rgba(221, 217, 217, 0.424);
            padding: 0;
            height: 100vh;
        }

        .campsite-list {
            border: 1px solid gray;
        }

        .form-row {
            margin-bottom: 10px;
        }

        .a-row {
            display: block;
        }

        .menu {
            margin-bottom: 10px;
        }

        .campsite-img {
            display: block;
            width: 100%;
        }
        
        .content-right {
            height: 100vh;
            background-color: aqua;
        }
    </style>
</head>
<body>        
    <div class="container-fluid">
        <div class="row">
            <div class="search-content">
                <div class="search" align="center">
                    <form action="#">
                        <input type="text" placeholder="검색" name="search">
                        <button type="submit"><i class="fa fa-search"></i></button>
                    </form>
                </div>
                
                <div class="col-sm-2 filter">                  
                    <form action="#">
                        <span>체크인</span>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker1'>
                                <input type='text' class="form-control" name="checkin" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        
                        <span>체크아웃</span>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker2'>
                                <input type='text' class="form-control" name="checkout" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>                       

                        <div class="form-row">
                            <a href="#menu1" class="a-row btn btn-default" data-toggle="collapse">캠핑종류</a>
                        </div>
                        <div id="menu1" class="collapse in menu">                                
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="campsite_group" id="cg1" value="글램핑">
                                <label for="cg1" class="form-check-label">글램핑</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="campsite_group" id="cg2" value="백팩킹">
                                <label for="cg2" class="form-check-label">백팩킹</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="campsite_group" id="cg3" value="글램핑">
                                <label for="cg3" class="form-check-label">글램핑</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="campsite_group" id="cg4" value="카라반">
                                <label for="cg4" class="form-check-label">카라반</label>
                            </div>                           
                        </div>

                        <div class="form-row">
                            <a href="#menu2" class="a-row btn btn-default" data-toggle="collapse">수용인원</a>
                        </div>                            
                        <div id="menu2" class="collapse in">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r1" value="4">
                                <label for="r1" class="form-check-label">4인 이상</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r2" value="8">
                                <label for="r2" class="form-check-label">8인 이상</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r3" value="12">
                                <label for="r3" class="form-check-label">12인 이상</label>
                            </div>
                        </div>

                        <div class="form-row">
                            <a href="#menu3" class="a-row btn btn-default" data-toggle="collapse">편의시설</a>
                        </div>
                        <div id="menu3" class="collapse in">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c1">
                                <label for="c1" class="form-check-label">샤워실</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c2">
                                <label for="c2" class="form-check-label">매점</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c3">
                                <label for="c3" class="form-check-label">수영장</label>
                            </div>
                        </div>

                        <div class="form-row">
                            <a href="#menu4" class="a-row btn btn-default" data-toggle="collapse">액티비티</a>
                        </div>
                        <div id="menu4" class="collapse in">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c4">
                                <label for="c4" class="form-check-label">등산</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c5">
                                <label for="c5" class="form-check-label">계곡</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="comforts" id="c6">
                                <label for="c6" class="form-check-label">낚시</label>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <a href="#menu5" class="a-row btn btn-default" data-toggle="collapse">가격</a>
                        </div>
                        <div id="menu5" class="collapse in">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r4" value="30000">
                                <label for="r4" class="form-check-label">30,000 이하</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r5" value="50000">
                                <label for="r5" class="form-check-label">50,000 이하</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="accept_people" id="r6" value="100000">
                                <label for="r6" class="form-check-label">100,000 이하</label>
                            </div>
                        </div>
                        

                        <div class="form-row">
                            <input type="submit" class="btn btn-primary" value="검색">
                        </div>
                    </form>
                        
                    
                </div>
                
                <div class="col-sm-7">
                    <div class="content-center">                        
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">곡성 키즈글램핑</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">전남 곡성군 죽곡면 오죽로</a>
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">충주호캠핑월드</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">충북 충주시 동량면 호반로</a>
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">도리돌캠핑장</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">경기 포천시 이동면 화동로</a>
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">백마강레저파크</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">충남 부여군 규암면 호암리</a>
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">강릉 경포 카라반파크</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">강원 강릉시 사천면 방동리</a>                                    
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="campsite-list">
                                <img src="#" alt="캠핑장" class="campsite-img">
                                <div class="name">yc글램핑</div>
                                <div class="address">
                                    <a href="#" onclick="setPoint(event)">경기 연천군 미산면 청정로</a>     
                                </div>
                                <div class="price">30000</div>
                                <div class="rating">4.5</div>
                                <a href="#" class="btn btn-success">장바구니</a>
                                <a href="#" class="btn btn-primary">예약하기</a>
                            </div>
                        </div>                        
                    </div>

                    <div class="pagenation-controls">                        
                        <ul class="pagination">                            
                            <li class="disable"><a href="#">이전</a></li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li><a href="#">다음</a></li>
                        </ul>                        
                    </div>
                </div>

                <div class="col-sm-3">
                    <div class="content-right">
                        <div id="map" style="width:100%; height:100%;"></div>
                    </div>
                </div>
                
            </div>           
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/js/ko.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=33ce5896736377936ebe7d42238ed01f&libraries=services"></script>    
    <script type="text/javascript">       
        $(function () {
            $('#datetimepicker1').datetimepicker({               
                locale: 'ko',
                format: 'LL (dd)',
                minDate: moment()
            });
            $('#datetimepicker2').datetimepicker({
                locale: 'ko',
                format: 'LL (dd)',
                minDate: moment(),
                useCurrent: false //Important! See issue #1075
            });
            $("#datetimepicker1").on("dp.change", function (e) {
                $('#datetimepicker2').data("DateTimePicker").minDate(e.date.add(1, 'd'));
            });
            $("#datetimepicker2").on("dp.change", function (e) {
                $('#datetimepicker1').data("DateTimePicker").maxDate(e.date.subtract(1, 'd'));
            });
        });
        
        var campsite = '곡성 키즈글램핑';
        var address = '전남 곡성군 죽곡면 오죽로';

        function setPoint(e) {                     
            var target = event.target;
            
            address = target.firstChild.nodeValue;
            console.log(address);    

            campsite = target.parentNode.previousSibling.previousSibling.firstChild.nodeValue;            
            console.log(campsite);
            
            geocoder.addressSearch(address, function(result, status) {            
                if (status === daum.maps.services.Status.OK) {
                    var coords = new daum.maps.LatLng(result[0].y, result[0].x);

                    // 결과값으로 받은 위치를 마커로 표시합니다
                    var marker = new daum.maps.Marker({
                        map: map,
                        position: coords
                    });

                    // 인포윈도우로 장소에 대한 설명을 표시합니다
                    var infowindow = new daum.maps.InfoWindow({
                        content: `<div style="width:150px;text-align:center;padding:6px 0;">${campsite}</div>`
                    });
                    infowindow.open(map, marker);

                    // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                    map.setCenter(coords);
                } 
            });
        }

        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                level: 8 // 지도의 확대 레벨
            };  

        // 지도를 생성합니다    
        var map = new daum.maps.Map(mapContainer, mapOption); 
        // 지도에 확대 축소 컨트롤을 생성한다
		var zoomControl = new daum.maps.ZoomControl();

		// 지도의 우측에 확대 축소 컨트롤을 추가한다
		map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
        // 주소-좌표 변환 객체를 생성합니다
        var geocoder = new daum.maps.services.Geocoder();       
        
        // 주소로 좌표를 검색합니다
        geocoder.addressSearch(address, function(result, status) {

            // 정상적으로 검색이 완료됐으면 
            if (status === daum.maps.services.Status.OK) {

                var coords = new daum.maps.LatLng(result[0].y, result[0].x);

                // 결과값으로 받은 위치를 마커로 표시합니다
                var marker = new daum.maps.Marker({
                    map: map,
                    position: coords
                });

                // 인포윈도우로 장소에 대한 설명을 표시합니다
                var infowindow = new daum.maps.InfoWindow({
                    content: `<div style="width:150px;text-align:center;padding:6px 0;">${campsite}</div>`
                });
                infowindow.open(map, marker);

                // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                map.setCenter(coords);
            } 
        });                    
    </script>
</body>
</html>